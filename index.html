<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Covid Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="covid-dashboard.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
</head>

<body class="bg-success">

    <!-- header -->
    <header class="hero py-5" style="background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(covid-virus.webp); background-size: cover; z-index: 10;">
        <div class="hero-body text-light text-uppercase text-center">
            <h1>covid-19 dashboard</h1>
            <h5>frontend web development</h5>
            <br>
        </div>
        <div class="hero-body text-light text-center">
            <p>This dashboard provides up-to-date information about Covid-19.</p>
        </div>
    </header>
    

    <!-- main content -->
    <main class="container border rounded bg-light w-75 my-5">

        <!-- chart.js graphs & charts-->
        <div class="container my-5">
            <h1 class="text-muted">Graphs & Charts</h1>
            <div class="row">
                <div class="col">
                    <canvas id="allGraphs" height="200"></canvas>
                </div>
            </div>
            <br><br>
            <div class='row'>
                <div class='col-6'>
                    <canvas id="globalPie"></canvas>
                </div>
                <div class='col-6'>
                    <canvas id="usaPie"></canvas>
                </div>
            </div>
            <br>
            <div class="text-center">
                <p> * The data above is from <a href="https://disease.sh/">Open Disease Data API</a>, and it is updated
                    daily.</p>
            </div>
        </div>

        <!-- vaccination data -->
        <div class="container my-5">
            <h1 class="text-muted">Vaccination Data</h1>
            <canvas id="vaccPie"></canvas>
        </div>

        <!-- heatmap -->
        <div class="container my-5">
            <h1 class="text-muted">Heatmap of Oregon</h1>
            <div id='Heatmapplot' class="center">
                <!-- Plotly chart will be drawn inside this DIV -->
            </div>
        </div>

        <!-- covid info -->
        <div class="container my-5">
            <h1 class="text-muted">Symptoms of COVID-19</h1>
            <p>People with COVID-19 have had a wide range of symptoms reported â€“ ranging from mild symptoms to
                severe
                illness. Symptoms may appear 2-14 days after exposure to the virus. Anyone can have mild to
                severe
                symptoms.
                People with these symptoms may have COVID-19:</p>
            <ul>
                <li>Fever or chills</li>
                <li>Cough</li>
                <li>Shortness of breath or difficulty breathing</li>
                <li>Fatigue</li>
                <li>Muscle or body aches</li>
                <li>Headache</li>
                <li>New loss of taste or smell</li>
                <li>Sore throat</li>
                <li>Congestion or runny nose</li>
                <li>Nausea or vomiting</li>
                <li>Diarrhea</li>
            </ul>
            <p>This list does not include all possible symptoms. CDC will continue to update this list as we
                learn
                more
                about COVID-19. Older adults and people who have severe underlying medical conditions like heart
                or
                lung
                disease or diabetes seem to be at higher risk for developing more serious complications from
                COVID-19
                illness.</p>
        </div>

        <div class="container my-5">
            <h1 class="text-muted">When to Seek Emergency Medical Attention</h1>
            <p>Look for emergency warning signs for COVID-19. If someone is showing any of these signs,
                <strong>seek
                    emergency medical care immediately:</strong>
            </p>
            <ul>
                <li>Trouble breathing</li>
                <li>Persistent pain or pressure in the test</li>
                <li>New confusion</li>
                <li>Inability to wake or stay awake</li>
                <li>Pale, grey, or blue-colored skin, lips, or nail beds, depending on skin tone</li>
            </ul>
            <p>This list is not all possible symptoms. Please call your medical provider for any other symptoms
                that
                are
                severe or concerning to you.</p>
            <p>Call 911 or call ahead to your local emergency facility: Notify the operator that you are seeking
                care
                for
                someone who has or may have COVID-19.</p>
        </div>

        <div class="container my-5">
            <h1 class="text-muted">Difference between COVID-19 & Flu</h1>
            <p>Influenza (Flu) and COVID-19 are both contagious respiratory illnesses, but they are caused by
                different
                viruses. COVID-19 is caused by infection with a new coronavirus (called SARS-CoV-2), and flu is
                caused
                by
                infection with influenza viruses.</p>
            <p>COVID-19 seems to spread more easily than flu and causes more serious illnesses in some people.
                It
                can
                also
                take longer before people show symptoms and people can be contagious for longer. More
                information
                about
                differences between flu and COVID-19 is available in the different sections below.</p>
            <p>Because some of the symptoms of flu and COVID-19 are similar, it may be hard to tell the
                difference
                between
                them based on symptoms alone, and testing may be needed to help confirm a diagnosis.</p>
            <p>While more is learned every day about COVID-19 and the virus that causes it, there is still a lot
                that is
                unknown . This page compares COVID-19 and flu, given the best available information to date.</p>
        </div>

    </main>

    <!-- footer -->
    <footer class="footer py-4 bg-dark">
        <div class="container">
            <p class="text-light">* Source: <a href="https://www.cdc.gov/">Centers for Disease Control and Prevention
                    (CDC)</a></p>
        </div>
    </footer>

</body>

<!-- script for heatmap -->
<script>
    const layoutOptions = {
        //width: 'relative',
        height: '550',
        mapbox: {
            style: 'streets',
            center: {
                lon: -120.500000, lat: 44.000000
            },
            zoom: 5
        },
        marker: {
            line: {
                color: "blue"
            }
        },
        coloraxis: {
            showscale: false,
            colorscale: "Viridis"
        }
    }
    const configOptions = {
        mapboxAccessToken: "pk.eyJ1IjoidGVzdHVzZXIxOTAiLCJhIjoiY2twNWd1bjMyMGx4YzJ3czEyZzZhMXZ5eCJ9.p-ZRhZtBuCp_G99borwdzA"
    }
    async function getData() {
        const loadData = await fetch("https://services.arcgis.com/uUvqNMGPm7axC2dD/arcgis/rest/services/COVID_Cases_Oregon_Public/FeatureServer/0/query?where=1%3D1&outFields=*&outSR=4326&f=json");
        return await loadData.json();
    }
    getData().then((value) => {
        const data = value.features.map((county) => {
            return {
                type: "choroplethmapbox",
                locations: [county.attributes.instName],
                z: [county.attributes.Cases],
                coloraxis: "coloraxis",
                geojson: {
                    type: "Feature",
                    id: county.attributes.instName,
                    geometry: {
                        type: "Polygon",
                        coordinates: county.geometry.rings
                    }
                }
            }

        });
        Plotly.newPlot('Heatmapplot', data, layoutOptions, configOptions);

    })
</script>

</html>